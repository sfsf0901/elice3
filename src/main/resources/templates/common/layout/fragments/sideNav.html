<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<nav th:fragment="sideNavFragment(currentMenu)" class="nav flex-column">
  <a class="nav-link" th:classappend="${currentMenu == 'password'} ? 'active'"
     th:href="@{/counsels}" >
    ğŸ©º&nbsp;&nbsp;&nbsp;ì‹¤ì‹œê°„ ì˜ë£Œ ìƒë‹´
  </a>
  <a class="nav-link mt-3" th:classappend="${currentMenu == 'main'} ? 'active'" th:href="@{/}">ğŸ¥&nbsp;&nbsp;&nbsp;ë³‘ì› ì°¾ê¸°</a>
  <a class="nav-link mt-3" th:classappend="${currentMenu == 'emergency'} ? 'active'" href="#" onclick="submitLocationForEmergency(); return false;">ğŸš‘&nbsp;&nbsp;&nbsp;ì‘ê¸‰ì‹¤ ì°¾ê¸°</a>
  <a class="nav-link mt-3" th:classappend="${currentMenu == 'map'} ? 'active'" th:href="@{/hospitals/map}">ğŸ“&nbsp;&nbsp;&nbsp;ì§€ë„ë¡œ ë³‘ì› ì°¾ê¸°</a>
  <a class="nav-link mt-3" th:classappend="${currentMenu == 'myPage'} ? 'active'" th:href="@{/my-page}" sec:authorize="isAuthenticated()">ğŸ‘¤&nbsp;&nbsp;&nbsp;ë§ˆì´í˜ì´ì§€</a>

  <!-- ì‘ê¸‰ì‹¤ ìœ„ì¹˜ í¼ -->
  <form id="emergencyForm" action="/hospitals/emergency" method="get" style="display:none;">
    <input type="hidden" name="latitude" id="latitudeInput">
    <input type="hidden" name="longitude" id="longitudeInput">
  </form>

  <script th:inline="javascript">
    function submitLocationForEmergency() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
          document.getElementById('latitudeInput').value = position.coords.latitude;
          document.getElementById('longitudeInput').value = position.coords.longitude;
          document.getElementById('emergencyForm').submit();
        }, function () {
          document.getElementById('latitudeInput').value = '37.5665';
          document.getElementById('longitudeInput').value = '126.9780';
          document.getElementById('emergencyForm').submit();
        });
      } else {
        alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
      }
    }
  </script>

</nav>
</html>
